{"ast":null,"code":"var _jsxFileName = \"/Users/oleksiimarchenko/Documents/React/webinars/webinar  26-09-2020/Project/Packman/src/components/Board/Board.js\";\nimport React, { Component } from 'react';\nimport Pacman from '../Pacman';\nimport Ghost from '../Ghost';\nimport Food from '../Food';\nimport './style.css';\n\nclass Board extends Component {\n  constructor(props) {\n    super(props);\n\n    this.lookForEat = () => {\n      const pacmanX = this.pacmanRef.current.state.position.left;\n      const pacmanY = this.pacmanRef.current.state.position.top;\n      const pacmanSize = this.pacmanRef.current.props.size;\n      const pacmanLastX = pacmanX + pacmanSize / 2;\n      const pacmanLastY = pacmanY + pacmanSize / 2;\n\n      for (let i = 0; i <= this.amountOfFood; i++) {\n        const currentFood = this['food' + i].current;\n\n        if (currentFood) {\n          const currentFoodX = currentFood.state.position.left;\n          const currentFoodY = currentFood.state.position.top;\n          const currentFoodSize = currentFood.props.foodSize;\n          const currentFoodLastX = currentFoodX + currentFoodSize / 2;\n          const currentFoodLastY = currentFoodY + currentFoodSize / 2;\n\n          if (pacmanX >= currentFoodX && pacmanX <= currentFoodLastX || pacmanLastX >= currentFoodX && pacmanLastX <= currentFoodLastX) {\n            if (pacmanY >= currentFoodY && pacmanY <= currentFoodLastY || pacmanLastY >= currentFoodY && pacmanLastY <= currentFoodLastY) {\n              if (!currentFood.state.hidden) {\n                currentFood.ate(); // !hidden\n                // this.props.increase(); // increase score\n\n                this.props.setScore(value => value + 1);\n              }\n            }\n          }\n        }\n      }\n    };\n\n    state = {\n      packmanPosition: {\n        top: 0,\n        left: 0\n      }\n    };\n    this.pacmanRef = React.createRef();\n    this.foods = [];\n    this.amountOfFood = (window.innerWidth - this.props.foodSize) * (window.innerHeight - this.props.topScoreBoardHeight) / (this.props.foodSize * this.props.foodSize) - 1;\n    console.log(this.amountOfFood);\n\n    for (let i = 0; i < this.amountOfFood; i++) {\n      this['food' + i] = React.createRef();\n    }\n  }\n\n  componentDidMount() {\n    this.intervalFood = setInterval(this.lookForEat, 100);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalFood);\n  }\n\n  getPackmanPosition() {}\n\n  render() {\n    const {\n      foodSize,\n      border,\n      topScoreBoardHeight\n    } = this.props;\n    let foods = [];\n    let currentTop = 0;\n    let currentLeft = 1 * foodSize;\n\n    for (let i = 0; i < this.amountOfFood; i++) {\n      if (currentLeft + foodSize >= window.innerWidth - border) {\n        currentTop += this.props.foodSize;\n        currentLeft = 0;\n      }\n\n      if (currentTop + foodSize >= window.innerHeight - border - topScoreBoardHeight) {\n        break;\n      }\n\n      const position = {\n        left: currentLeft,\n        top: currentTop\n      };\n      currentLeft += foodSize;\n      foods.push( /*#__PURE__*/React.createElement(Food, {\n        key: `food-elem-${i}`,\n        position: position,\n        ref: this['food' + i],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"board\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, foods, /*#__PURE__*/React.createElement(Pacman, {\n      ref: this.pacmanRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Ghost, {\n      color: \"blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }));\n  }\n\n} // TODO: refactor and move to config\n\n\nBoard.defaultProps = {\n  foodSize: 50,\n  border: 10 * 2,\n  topScoreBoardHeight: 50\n};\nexport default Board;","map":{"version":3,"sources":["/Users/oleksiimarchenko/Documents/React/webinars/webinar  26-09-2020/Project/Packman/src/components/Board/Board.js"],"names":["React","Component","Pacman","Ghost","Food","Board","constructor","props","lookForEat","pacmanX","pacmanRef","current","state","position","left","pacmanY","top","pacmanSize","size","pacmanLastX","pacmanLastY","i","amountOfFood","currentFood","currentFoodX","currentFoodY","currentFoodSize","foodSize","currentFoodLastX","currentFoodLastY","hidden","ate","setScore","value","packmanPosition","createRef","foods","window","innerWidth","innerHeight","topScoreBoardHeight","console","log","componentDidMount","intervalFood","setInterval","componentWillUnmount","clearInterval","getPackmanPosition","render","border","currentTop","currentLeft","push","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport Pacman from '../Pacman';\nimport Ghost from '../Ghost';\nimport Food from '../Food';\nimport './style.css';\n\nclass Board extends Component {\n\n  constructor(props) {\n    super(props);\nstate={\n  packmanPosition:{\n    top:0,\n    left:0\n  }\n}\n    this.pacmanRef = React.createRef();\n\n    this.foods = [];\n    this.amountOfFood = (\n      (window.innerWidth - this.props.foodSize)\n      * (window.innerHeight - this.props.topScoreBoardHeight)\n    ) / (this.props.foodSize * this.props.foodSize) - 1;\n\n    console.log(this.amountOfFood);\n    for (let i = 0; i < this.amountOfFood; i++) {\n      this['food' + i] = React.createRef();\n    }\n  }\n\n  componentDidMount() {\n    this.intervalFood = setInterval(this.lookForEat, 100);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalFood);\n  }\n\n  lookForEat = () => {\n    const pacmanX = this.pacmanRef.current.state.position.left;\n    const pacmanY = this.pacmanRef.current.state.position.top;\n    const pacmanSize = this.pacmanRef.current.props.size\n\n    const pacmanLastX = pacmanX + pacmanSize / 2;\n    const pacmanLastY = pacmanY + pacmanSize / 2;\n\n    for (let i = 0; i <= this.amountOfFood; i++) {\n      const currentFood = this['food' + i].current;\n      if (currentFood) {\n        const currentFoodX = currentFood.state.position.left;\n        const currentFoodY = currentFood.state.position.top;\n        const currentFoodSize = currentFood.props.foodSize;\n        const currentFoodLastX = currentFoodX + currentFoodSize / 2;\n        const currentFoodLastY = currentFoodY + currentFoodSize / 2;\n\n        if (\n          (pacmanX >= currentFoodX && pacmanX <= currentFoodLastX)\n          || (pacmanLastX >= currentFoodX && pacmanLastX <= currentFoodLastX)) {\n          if ((pacmanY >= currentFoodY && pacmanY <= currentFoodLastY)\n            || (pacmanLastY >= currentFoodY && pacmanLastY <= currentFoodLastY)) {\n            if (!currentFood.state.hidden) {\n              currentFood.ate(); // !hidden\n              // this.props.increase(); // increase score\n              this.props.setScore((value) => value + 1)\n            }\n          }\n        }\n      }\n    }\n  }\ngetPackmanPosition(){\n\n}\n  render() {\n    const { foodSize, border, topScoreBoardHeight } = this.props;\n    let foods = [];\n    let currentTop = 0;\n    let currentLeft = 1 * foodSize;\n    for (let i = 0; i < this.amountOfFood; i++) {\n      if (currentLeft + foodSize >= window.innerWidth - border) {\n        currentTop += this.props.foodSize;\n        currentLeft = 0;\n      }\n\n      if (currentTop + foodSize >= (window.innerHeight - border - topScoreBoardHeight )) {\n        break;\n      }\n\n      const position = { left: currentLeft, top: currentTop };\n      currentLeft += foodSize;\n      foods.push(\n        <Food\n          key={`food-elem-${i}`}\n          position={position}\n          ref={this['food' + i]}\n        />\n      );\n    }\n\n    return (\n      <div className=\"board\">\n        {foods}\n        <Pacman ref={this.pacmanRef} />\n        <Ghost color=\"blue\" />\n      </div>\n    )\n  }\n}\n\n// TODO: refactor and move to config\nBoard.defaultProps = {\n  foodSize: 50,\n  border: 10 * 2,\n  topScoreBoardHeight: 50\n}\n\nexport default Board;"]},"metadata":{},"sourceType":"module"}